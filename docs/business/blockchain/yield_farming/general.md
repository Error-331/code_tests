# Yield farming

Yield farming is a way to make more crypto with your crypto. It involves you lending your funds to others through the magic of computer 
programs called **smart contracts**. In return for your service, you earn fees in the form of crypto.

- it involves lending (кредитование) or staking (размещение) your cryptocurrency coins or tokens to get rewards in the form of transaction fees (комиссии) or interest (процентов);
- similar to earning interest from a bank account (lending money to the bank);
- it is more riskier, volatile, and complicated unlike putting money in a bank;
- yield farmers will typically move their funds around quite a lot between different protocols in search of high yields;
- as a result, DeFi platforms may also provide other economic incentives to attract more capital to their platform;
- yield farming is a highly competitive and fast-paced market, and the rewards can fluctuate rapidly;
- if a yield farming strategy works for a while, many farmers will jump on the opportunity, and it may stop yielding high returns;

## How does yield farming work?

Users (liquidity providers (LPs)) providing their cryptocurrencies for the functioning of the DeFi platform.

### Overall

- LPs provide coins or tokens to a liquidity pool—a smart contract-based decentralised application (dApp) that contains all the funds;
- Once the LPs lock tokens into a liquidity fund they are awarded a fee or interest generated from the underlying DeFi platform the liquidity pool is on;
- The lending happens through smart contracts with no middleman or intermediator;
- The liquidity pool powers a marketplace where anyone can lend or borrow tokens; 
- The usage of these marketplace incurs fees from the users, and the fees are used to pay liquidity providers for staking their own tokens in the pool;
- While lenders can use the tokens as they wish, most lenders currently are **speculators** looking for **arbitrage opportunities** by cashing in on the token's fluctuations in the market;
- Yield farming is typically done using **ERC-20** tokens on Ethereum, and the rewards are usually also a type of **ERC-20** token;

### In deep

- DeFi applications are permissionless, meaning that anyone (or anything, like a smart contract) with an Internet connection and a supported 
wallet can interact with them; 
- this applications  don’t require trust in any custodians or middlemen (trustless);
- it allows anyone to earn passive income using the decentralized ecosystem of **money legos** built on Ethereum; 
- yield farming can be paralleled with staking;

#### Liquidity pool

- basically a smart contract that contains funds; 
- in return for providing liquidity to the pool, LPs get a reward;
- that reward may come from fees generated by the underlying DeFi platform, or some other source;
- the basic idea is that a liquidity provider deposits funds into a liquidity pool and earns rewards in return;

## Returns (Как рассчитывается рентабельность доходного фарминга?)

- The estimated return(доход) in the yield farming process is calculated in terms of annual percentage yield (APY);
- It is the rate of return that the user gains over a year;
- Compound interest(сложные проценты) is also factored in the APY calculation;

## Risks of yield farming?

- Cyber theft; 
- Frauds;
- Lack of concrete policies;
- Volatility of tokens (volatility can also be in short bursts(всплески), so the price of a token can surge or cash when it is locked in the liquidity pool);

## Strategies

### General

- move cryptos around all the time between different lending marketplaces to maximize the returns; 
- be very secretive about the best yield farming strategies;

## Total Value Locked (TVL)

- it measures how much crypto is locked in DeFi lending and other types of money marketplaces;
- in some sense, TVL is the aggregate liquidity (совокупная ликвидность) in liquidity pools(пулы ликвидности);
- it’s a useful index to measure the health of the DeFi and yield farming market as a whole; 
- it’s also an effective metric to compare the 'market share' of different DeFi protocols;

## Principle of operation

- yield farming is closely related to a model called automated market maker (AMM);
- it typically involves liquidity providers (LPs) and liquidity pools;
- liquidity providers deposit funds into a liquidity pool;
- this pool powers a marketplace where users can lend, borrow, or exchange tokens;
- the usage of these platforms incurs fees, which are then paid out to liquidity providers according to their share of the liquidity pool; 
- this is the foundation of how an AMM works;
- the implementations can be vastly different;
- another incentive to add funds to a liquidity pool could be the distribution of a new token; 
- there may not be a way to buy a token on the open market, only in small amounts, on the other hand, it may be accumulated by providing 
liquidity to a specific pool;
- the rules of distribution will all depend on the unique implementation of the protocol;
- the funds deposited are commonly stablecoins pegged to the USD - though this isn’t a general requirement; 
- some of the most common stablecoins used in DeFi are DAI, USDT, USDC, BUSD, and others; 
- some protocols will mint tokens that represent your deposited coins in the system;
  
### Notes on depositing (using examples)

- if you deposit DAI into Compound, you’ll get cDAI, or Compound DAI; 
- if you deposit ETH to Compound, you’ll get cETH;
- you could deposit your cDAI to another protocol that mints a third token to represent your cDAI that represents your DAI;
- these chains can become really complex and hard to follow;

## Calculation of returns

- typically, returns are calculated annualized;
- commonly used metrics are Annual Percentage Rate (APR) and Annual Percentage Yield (APY);
- APR doesn’t take into account the effect of compounding, while APY does;
- compounding, means directly reinvesting profits to generate more returns;
- APR and APY may be used interchangeably;
- these are only estimations and projections;
- even short-terms rewards are quite difficult to estimate accurately;
- weekly or even daily estimated returns may make more sense;

## Collateralization in DeFi

- collateral need to be put up in order to cover your loan;
- collateral essentially acts as insurance for your loan;
- collateralization ratio should be kept in mind;
- if collateral’s value falls below the threshold required by the protocol, collateral may be liquidated on the open market;
- each platform will have its own set of rules for and required collateralization ratio;
- platforms commonly work with a concept called overcollateralization;
- borrowers have to deposit more value than they want to borrow - to reduce the risk of violent market crashes liquidating a large amount of 
  collateral in the system;

### Example

- lending protocol requires a collateralization ratio of 200%;
- this means that for every 100 USD of value that was put in, can be borrowed 50 USD;
- it’s usually safer to add more collateral than required to reduce liquidation risk even more; 
- with that said, many systems will use very high collateralization ratios (such as 750%) to keep the entire platform relatively safe from 
liquidation risk;

## Risks

- the most profitable yield farming strategies are highly complex and only recommended for advanced users;
- yield farming is generally more suited to those that have a lot of capital to deploy (whales);
- yield farming isn’t as easy as it seems, and if you don’t understand what you’re doing, you’ll likely lose money;
- due to the nature of DeFi, many protocols are built and developed by small teams with limited budgets (risk of smart contract bugs); 
- vulnerabilities and bugs are discovered all the time;
- composability (компонуемость);

### Example of composability impact on risks

- DeFi protocols are permissionless and can seamlessly integrate with each other (DeFi ecosystem is heavily reliant on each of its building blocks); 
- applications are composable - they can easily work together;
- if just one of the building blocks doesn’t work as intended, the whole ecosystem may suffer;
- you not only have to trust the protocol you deposit your funds to but all the others it may be reliant upon;

## Platforms and protocols

### Compound Finance

- algorithmic money market that allows users to lend and borrow assets;
- anyone with an Ethereum wallet can supply assets to Compound’s liquidity pool and earn rewards that immediately begin compounding (Сложные проценты);
- the rates are adjusted algorithmically based on supply and demand;
- compound is one of the core protocols of the yield farming ecosystem;

### MakerDAO

- decentralized credit platform that supports the creation of DAI, a stablecoin algorithmically pegged to the value of USD;
- anyone can open a Maker Vault where they lock collateral assets, such as ETH, BAT, USDC, or WBTC; 
- they can generate DAI as debt against this collateral that they locked;
- this debt incurs interest over time called the stability fee - the rate of which is set by MKR token holders;
- yield farmers may use Maker to mint DAI to use in yield farming strategies;

### Synthetix

- synthetic asset protocol; 
- it allows anyone to lock up (stake) Synthetix Network Token (SNX) or ETH as collateral and mint synthetic assets against it; 
- synthetic asset - practically anything that has a reliable price feed; 
- this allows virtually any financial asset to be added to the Synthetix platform;
- synthetix may allow all sorts of assets to be used for yield farming in the future;

### Aave

- is a decentralized protocol for lending and borrowing; 
- interest rates are adjusted algorithmically, based on current market conditions; 
- lenders get 'aTokens' in return for their funds; 
- these tokens immediately start earning and compounding interest upon depositing; 
- allows other more advanced functionality, such as **flash loans**;
- is heavily used by yield farmers;

### Uniswap

- is a decentralized exchange (DEX) protocol that allows for trustless token swaps;
- liquidity providers deposit an equivalent value of two tokens to create a market; 
- traders can then trade against that liquidity pool; 
- in return for supplying liquidity, liquidity providers earn fees from trades that happen in their pool;
- one of the most popular platforms for trustless token swaps due to its frictionless nature;

### Curve Finance

- is a decentralized exchange protocol specifically designed for efficient stablecoin swaps; 
- unlike other similar protocols like Uniswap, Curve allows users to make high-value stablecoin swaps with relatively low slippage;
- due to the abundance of stablecoins in the yield farming scene, Curve pools are a key part of the infrastructure;

### Balancer

- is a liquidity protocol similar to Uniswap and Curve; 
- the key difference is that it allows for custom token allocations in a liquidity pool; 
- this allows liquidity providers to create custom Balancer pools instead of the 50/50 allocation required by Uniswap;
- just like with Uniswap, LPs earn fees for the trades that happen in their liquidity pool;
- is an important innovation for yield farming strategies;

### Yearn.finance

- is a decentralized ecosystem of aggregators for lending services such as Aave, Compound, and others; 
- it aims to optimize token lending by algorithmically finding the most profitable lending services;
- funds are converted to yTokens upon depositing that periodically rebalance to maximize profit;
- is useful for farmers who want a protocol that automatically chooses the best strategies for them;
